# 8.2 프로세스(Processes)

## 8.2.1 개요
프로세스는 실행 중인 프로그램의 인스턴스이다. 운영체제는 예외 메커니즘을 바탕으로 프로세스를 구현하여,  
프로그램이 마치 CPU와 메모리를 독점하는 것처럼 보이게 한다.

프로세스 문맥(context)은 다음 정보를 포함한다:
- 코드와 데이터
- 스택
- 일반 레지스터와 프로그램 카운터(PC)
- 환경 변수
- 열린 파일 디스크립터

사용자는 셸에서 실행 파일을 호출하면 새로운 프로세스가 생성되고, 해당 문맥에서 프로그램이 실행된다.  
애플리케이션도 새로운 프로세스를 생성할 수 있다.

## 8.2.2 논리적 제어 흐름(Logical Control Flow)
프로세스는 논리적 흐름을 제공한다. 하나의 물리적 CPU가 여러 프로세스를 번갈아 실행하지만,  
각 프로세스 입장에서는 자신의 명령어만 연속으로 실행되는 것처럼 보인다.  
운영체제는 타임 슬라이스(time slice) 를 사용하여 프로세스가 차례로 CPU를 사용하도록 한다.

## 8.2.3 동시성과 병렬성
- 동시성(Concurrency): 두 흐름이 시간적으로 겹쳐 실행된다.  
- 병렬성(Parallelism): 서로 다른 코어나 컴퓨터에서 실제로 동시에 실행된다.

두 개념은 구분되며, 동시성은 코어 수와 무관하다. 병렬성은 동시성의 부분집합이다.

## 8.2.4 독립적 주소 공간(Private Address Space)
각 프로세스는 자신의 논리 주소 공간을 가진다. 다른 프로세스는 해당 공간을 임의로 읽거나 쓸 수 없다.  
일반적 구성은 다음과 같다: Code / Data / Heap / Stack / (상위 영역의) Kernel Space.  
사용자 모드에서는 커널 영역에 직접 접근할 수 없다.

## 8.2.5 사용자 모드와 커널 모드
프로세서는 모드 비트로 권한을 구분한다.
- User Mode: 일반 애플리케이션 실행, 제한된 자원 접근
- Kernel Mode: 운영체제 코드 실행, 모든 자원 접근

시스템 콜, 인터럽트, 예외 발생 시 커널 모드로 전환되고, 처리 후 사용자 모드로 복귀한다.

## 8.2.6 컨텍스트 스위치(Context Switch)
스케줄러는 필요 시 현재 프로세스를 선점하고 다른 프로세스로 전환한다. 과정은 다음과 같다:
1. 현재 프로세스 문맥 저장(레지스터, PC, 스택, 페이지 테이블 등)
2. 대상 프로세스 문맥 복원
3. CPU 제어권을 대상 프로세스에 전달

컨텍스트 스위치는 다음 상황에서 발생한다:
- 타이머 인터럽트(주기적)
- 블로킹 시스템 콜(read 등 I/O 대기)
- 명시적 `sleep` 요청
- 스케줄러의 선점 결정

## 요약
- 프로세스는 실행 중인 프로그램의 인스턴스이다.
- 논리적 제어 흐름과 독립적 주소 공간을 제공한다.
- 사용자/커널 모드 전환과 컨텍스트 스위치가 핵심 동작이다.

---
## 연습문제
1. 동시성과 병렬성의 차이를 서술하라.  
2. 사용자 모드에서 커널 모드로 전환되는 세 가지 계기를 열거하라.  
3. 컨텍스트 스위치가 I/O 성능과 CPU 활용률에 주는 효과를 설명하라.